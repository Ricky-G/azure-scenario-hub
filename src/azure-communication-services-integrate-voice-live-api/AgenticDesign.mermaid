flowchart LR
    %% ───────── 1. Entry point ─────────
    VoiceAPI[Voice Live API] --> Manager["`Manager Agent
    (orchestrator)`"]

    %% ───────── 2. Billing agent + tools ─────────
    subgraph BillingBox [Billing Agent]
        direction TB
        BillingCore[Billing Agent Core]
        BillingCore --> BTool1[RAG – Billing KB]
        BillingCore --> BTool2[Payment API]
    end
    Manager --> BillingCore
    BillingCore -- "Intent Changed" --> Manager

    %% ───────── 3. General‑info agent + tools ─────────
    subgraph InfoBox [General Info Agent]
        direction TB
        InfoCore[General Info Core]
        InfoCore --> ITool1[RAG – General KB]
        InfoCore --> ITool2[Search API]
    end
    Manager --> InfoCore
    InfoCore -- "Intent Changed" --> Manager

    %% ───────── 4. Tech‑support agent + tools ─────────
    subgraph SupportBox [Tech Support Agent]
        direction TB
        SupportCore[Tech Support Core]
        SupportCore --> STool1[RAG – Troubleshooting]
        SupportCore --> STool2[Diagnostic Tool]
    end
    Manager --> SupportCore
    SupportCore -- "Intent Changed" --> Manager